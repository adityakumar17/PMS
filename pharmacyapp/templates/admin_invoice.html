{% extends 'admin_index.html' %}
{% load static custom_tags %}
{% block body %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<style>
  #active {
    border-radius: 50%;
  }

  #inactive {
    border-radius: 50%;
  }
  #active:hover {
    cursor: default !important;
  }
  #inactive:hover {
    cursor: default !important;
  }
  img {
    width: 60px;
    height: 60px;
  }
  .table-responsive{
    font-size:11px;
  }
  .material-symbols-outlined
  {
    font-size:14px;
  }
    td{
    padding:0px;
    }
    .password{
        display:none;
    }
    .text{
      display:block;
    }
    .green-row{
      color:white;
      background-color:green!important;
    }
    .red-row{
      color:white;
      background-color:red!important;
    }
    .head-row{
      color:white;
      background-color:#165d5d!important;
    }
</style>

<div class="card">
            <div class="card-body">
<div class="container">

    <h4 class="my-4">Search Invoice</h4><hr>
<form action="" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="mb-3">
        <input type="text" style="width:100%;" class="form-control" id="exampleInputText1" placeholder="Search Invoice" value="{{fromdate}}" name="fromdate">
    </div>
    </br>
        <button type="submit" class="btn btn-primary">Search</button>
</form>
</div>
<br>{% if data %}
<div class="container">
<h3 align="center"> Invoice related to search for '{{fromdate}}'</h3>
    <div class="card-body">
        <h4>Invoice #{{data.orderid}}</h4>
                <table id="example1" class="table table-bordered table-striped">
                  <tr>
                    <th>Customer Name</th>
                    <td>{{data.custname}}</td>
                     <th>Customer Number</th>
                    <td>
                      <span id="mobile-{{forloop.counter}}" class="password">{{data.custmobile}}</span>
                      <button type="button" class="btn btn-success" id="mobile-btn-{{forloop.counter}}" onclick="togglePassword('mobile-{{forloop.counter}}', this.id)"><i class="fa fa-eye"></i></button>
                    </td>
                  </tr>

                  <tr>
                    <th>Mode of Payment</th>
                    <td>{{data.payment}}</td>
                  </tr>
                </table>
                <table id="example1" class="table table-bordered table-striped">
                  <tr>
                    <th>S.No</th>
                    <th>Medicine Name</th>
                    <th>Quantity</th>
                    <th>Price(per unit)</th>
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody>
                  {% for i in productid %}
                  <tr>
                    <td>{{forloop.counter}}</td>
                    <td>{{i|productname}}</td>
                    <td>{% productqty i request.user data.id %}</td>
                    <td>{{i|productprice}}</td>
                    <td>{% producttotalprice i request.user data.id %}</td>
                  </tr>
                {% endfor %}
                </table>

<h1 style="color:green">
    <h4 align="center"><button onclick="window.print()"><i class="fa fa-file"></i></button></h4>
</h1>
              <!-- /.card-body -->
</div>

 {% elif data2 %}

<h4 align="center">Data not found</h4>
{% endif %}

</div>
</div>
</div>
  <script>
    function togglePassword(element_id, btnId){
      var elementData = document.getElementById(element_id);
      var elementBtn = document.getElementById(btnId);
      console.log(elementData.classList.contains("password"))
      if(elementData.classList.contains("password")){
        elementData.classList.remove("password");
        elementData.classList.add("text");
        elementBtn.children[0].classList.add("fa-eye-slash");
        elementBtn.children[0].classList.remove("fa-eye");
      }
      else{
        elementData.classList.remove("text");
        elementData.classList.add("password");
        elementBtn.children[0].classList.remove("fa-eye-slash");
        elementBtn.children[0].classList.add("fa-eye");
      }
    }
  </script>

{% endblock %}